<!DOCTYPE html>
<html>
<head>
	<title>WebGL Texture Arrays</title>
	<script src="../webgl.js"></script>
</head>
<body>
	<script id="vert-shader" type="text/plain">
		attribute vec2 aPos;
		varying vec2 vPos;
		
		void main()
		{
			vPos = aPos;
			gl_Position = vec4(aPos * vec2(1,-1) + vec2(0,1), 0, 1);
		}
	</script>
	<script id="frag-shader" type="text/plain">
		uniform sampler2D uTex[2];
		uniform sampler2D uOtherTex;
		varying highp vec2 vPos;
		
		void main()
		{
			gl_FragColor =
				texture2D(uTex[0], vPos) * 0.33 +
				texture2D(uTex[1], vPos) * 0.33 +
				texture2D(uOtherTex, vPos) * 0.33;
		}
	</script>
	<script>
		var gl = webgl(400, 400, render, "appendToBody", "no-alpha");
		var buffer = gl.buffer([0,0, 1,0, 0,1, 1,1]);
		var shader = gl.shader("#vert-shader", "#frag-shader");
		var tree = gl.textureFromUrl("tree.png");
		var stone = gl.textureFromUrl("stone.png");
		var seal = gl.textureFromUrl("seal.png");
		
		gl.setClearColor(0.75, 0.875, 1, 1);
		
		function render()
		{
			shader.draw({
				mode: "trianglestrip",
				aPos: buffer,
				uTex: [stone, tree],
				uOtherTex: seal,
			});
		}
	</script>
</body>
</html>
